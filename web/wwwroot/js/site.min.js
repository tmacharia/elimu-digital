function postClass()
{
  loadingBtn("classSubmitBtn", !0);
  $.ajax({
    method: "POST", url: "/classes/create", type: "json", data: {model: classRoom}, success: function(n)
      {
        yay(n);
        loadingBtn("classSubmitBtn", !1);
        setTimeout(function()
        {
          window.location = "/classes"
        }, 2e3)
      }, error: function(n)
      {
        loadingBtn("classSubmitBtn", !1);
        n.responseText ? error(n.responseText) : error(n.statusText)
      }
  })
}
function onLikeContent(n, t, i)
{
  $(i).prop("disabled", !0);
  postLike(n, i)
}
function postLike(n, t)
{
  $.ajax({
    method: "POST", url: "/api/contents/" + n + "/like", success: function(n)
      {
        yay(n);
        updateLikes()
      }, error: function(n)
      {
        n.status === 403 ? error("You are not authorized to perform this action") : parseError(n.responseText)
      }
  });
  $(t).prop("disabled", !1)
}
function updateLikes()
{
  var n = $(".likes-count"),
    t = parseInt(n.text());
  t += 1;
  n.text(t)
}
function onComment()
{
  var t = parseInt($("#CommentId").text()),
    n = {};
  n.Message = $("#CommentBox")[0].innerHTML;
  loadingBtn("postCommentBtn", !0);
  $.ajax({
    method: "POST", url: "/api/contents/" + t + "/comment", type: "json", data: {model: n}, success: function(n)
      {
        yay(n);
        setTimeout(function()
        {
          window.location.reload()
        }, 1e3)
      }, error: function(n)
      {
        parseError(n.responseText)
      }
  })
}
function postInitialProgress(n, t, i)
{
  $.ajax({
    method: "POST", url: "/api/progress/initialize", data: {
        id: n, current: t, overall: i
      }, type: "json", success: function(n)
      {
        console.log(n)
      }, error: function(n)
      {
        parseError(n.responseText)
      }
  })
}
function postProgress(n, t)
{
  $.ajax({
    method: "POST", url: "/api/progress", data: {
        id: n, current: t
      }, type: "json", success: function(n)
      {
        console.log(n);
        n.isComplete && yay("Coursework completed! Please refresh page.")
      }, error: function(n)
      {
        parseError(n.responseText)
      }
  })
}
function onDownloadContent(n)
{
  console.log("Downloading...");
  $.ajax({
    method: "POST", url: "/api/progress/download", data: {id: n}, type: "json"
  })
}
function postCourse()
{
  course.Name = $("#courseName").val();
  course.Type = $("#courseType").val();
  loadingBtn("btnSubmit", !0);
  $.ajax({
    type: "POST", url: "/api/courses", data: {
        schoolId: 1, model: course
      }, dataType: "json", error: function(n)
      {
        n.status === 200 ? (loadingBtn("btnSubmit", !1), yay(n.responseText), setTimeout(function()
          {
            location.reload()
          }, 700)) : (loadingBtn("btnSubmit", !1), error(n.responseText))
      }
  })
}
function onDeleteCourse(n)
{
  $.confirm({
    theme: "supervan", title: "Delete this record?", content: "Are you sure you want to delete this course?", type: "red", typeAnimated: !0, buttons: {
        yes: {
          text: "Delete", btnClass: "btn-red", action: function()
            {
              deleteCourse(n)
            }
        }, No: function(){}
      }
  })
}
function deleteCourse(n)
{
  $.confirm({
    theme: "supervan", content: function()
      {
        var t = this;
        return $.ajax({
            url: "/api/courses/" + n, dataType: "json", method: "DELETE"
          }).fail(function(n)
          {
            n.status === 200 ? (t.setType("green"), t.setIcon("fa fa-check-circle"), t.setTitle(n.responseText), t.setContent("Record deleted successfully."), t.onAction = function()
              {
                setTimeout(function()
                {
                  location.reload()
                }, 500)
              }) : (t.setType("red"), t.setIcon("fa fa-ban"), t.setContent(n.responseText), t.setTitle(n.statusText))
          })
      }
  })
}
function onSearch(){}
function onSelectUnit4Exam()
{
  $.ajax({
    method: "GET", url: "/api/units/my", success: function(n)
      {
        $("#units-loader").hide();
        var t = new Option("-- Select --", "");
        if ($("#unitSelect").append(t), n.length > 0)
          for (i = 0; i < n.length; i++)
            AddUnitToSetExamOptions(n[i])
      }, error: function(n)
      {
        console.log(n);
        n.responseText ? parseError(n.responseText) : error(n.statusText)
      }
  })
}
function AddUnitToSetExamOptions(n)
{
  var t = new Option(n.name, n.id);
  $("#unitSelect").append(t)
}
function navigateToSetExam()
{
  var n = {},
    t;
  n.id = $("#unitSelect").val();
  t = $("#unitSelect option").each(function(t, i)
  {
    $(i)[0].value === n.id && (n.name = $(i)[0].text)
  });
  window.location = "/exams/set-for/" + slugify(n.name) + "/" + n.id
}
function loadingBtn(n, t)
{
  $("#" + n).prop("disabled", t);
  t ? (btn_text = $("#" + n).text(), $("#" + n).html("<i class='fa fa-circle-o-notch fa-spin'><\/i> posting...")) : $("#" + n).text(btn_text)
}
function yay(n)
{
  toastr.success(n)
}
function error(n)
{
  toastr.error(n)
}
function deleteConfirm(){}
function disableLink(n)
{
  n.preventDefault();
  $(this).prop("disabled", !0)
}
function parseError(n)
{
  var t = JSON.parse(n),
    i;
  t instanceof String ? error(n) : (i = t[Object.keys(t)[0]], error(i))
}
function slugify(n)
{
  return n.toString().trim().toLowerCase().replace(/\s+/g, "-").replace(/[^\w\-]+/g, "").replace(/\-\-+/g, "-").replace(/^-+/, "").replace(/-+$/, "")
}
function postUnit()
{
  unit = {};
  unit.Name = $("#unitName").val();
  unit.Level = $("#Level").val();
  unit.Semester = $("#Semester").val();
  loadingBtn("unitBtnSubmit", !0);
  $.ajax({
    type: "POST", url: "/api/units", data: {
        courseId: $("#CourseId").val(), model: unit
      }, dataType: "json", error: function(n)
      {
        console.log(n);
        n.status === 200 || n.status === 201 ? (loadingBtn("unitBtnSubmit", !1), yay(n.responseText), setTimeout(function()
          {
            location.reload()
          }, 700)) : (loadingBtn("unitBtnSubmit", !1), n.responseText ? error(n.responseText) : error(n.statusText))
      }
  })
}
function onAssignLecturer(n, t)
{
  unit = {};
  unit.id = t;
  $("#unit_assign").text(n);
  $("#lecSelect").empty();
  $.ajax({
    method: "GET", url: "/api/lecturers", success: function(n)
      {
        $("#lecs-loader").hide();
        var t = new Option("-- Select --", "");
        if ($("#lecSelect").append(t), n.length > 0)
          for (i = 0; i < n.length; i++)
            AddLecToOptions(n[i])
      }, error: function(n)
      {
        console.log(n)
      }
  })
}
function AddLecToOptions(n)
{
  var t = new Option(n.profile.fullNames, n.id);
  $("#lecSelect").append(t)
}
function pushAssignLec()
{
  var n = $("#lecSelect").val();
  $.ajax({
    method: "POST", url: "/api/units/" + unit.id + "/assignLecturer/" + n, success: function(n)
      {
        yay(n);
        setTimeout(function()
        {
          location.reload()
        }, 1e3)
      }, error: function(n)
      {
        error(n.responseText)
      }
  })
}
function onAllocateUnit(n, t)
{
  unit = {};
  unit.id = t;
  $("#unit_allocate").text(n);
  $("#roomSelect").empty();
  $.ajax({
    method: "GET", url: "/api/classes", success: function(n)
      {
        $("#rooms-loader").hide();
        var t = new Option("-- Select --", "");
        if ($("#roomSelect").append(t), n.length > 0)
          for (i = 0; i < n.length; i++)
            AddRoomToOptions(n[i])
      }, error: function(n)
      {
        console.log(n)
      }
  })
}
function AddRoomToOptions(n)
{
  var t = new Option(n.room + ", " + n.startTime + " - " + n.endTime + ", " + n.dayOfWeek, n.id);
  $("#roomSelect").append(t)
}
function pushAllocateUnit()
{
  var n = $("#roomSelect").val();
  $.ajax({
    method: "POST", url: "/api/classes/" + n + "/allocateToUnit/" + unit.id, success: function(n)
      {
        yay(n);
        setTimeout(function()
        {
          location.reload()
        }, 1e3)
      }, error: function(n)
      {
        error(n.responseText)
      }
  })
}
var format = "hh:mm tt",
  classRoom = {},
  players,
  course,
  btn_text,
  unit;
$("#newClassForm").submit(function(n)
{
  n.preventDefault();
  classRoom.DayOfWeek = $("#DayOfWeek").val();
  classRoom.StartTime = Date.parseExact($("#StartTime").val(), format).toLocaleString();
  classRoom.EndTime = Date.parseExact($("#EndTime").val(), format).toLocaleString();
  classRoom.Room = $("#Room").val();
  console.log(classRoom);
  postClass(classRoom)
}),
function()
{
  players = plyr.setup({debug: !1});
  players[0].on("ended", onExit)
}();
course = {};
$("#courseForm").submit(function(n)
{
  n.preventDefault();
  var t = $("#courseForm").serialize();
  console.log(t)
});
btn_text = "";
unit = {};
(function()
{
  $("#unitBtnSubmit").click(function()
  {
    _proc === "Assign Lec" || postUnit()
  })
});
//# sourceMappingURL=site.min.js.map